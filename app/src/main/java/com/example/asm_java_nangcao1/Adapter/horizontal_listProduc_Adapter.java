package com.example.asm_java_nangcao1.Adapter;import android.content.Context;import android.content.SharedPreferences;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import com.bumptech.glide.Glide;import com.example.asm_java_nangcao1.Activity.sanPham_Activity;import com.example.asm_java_nangcao1.Model.gioHang_Model;import com.example.asm_java_nangcao1.Model.khoHang_Model;import android.widget.ImageView;import android.widget.TextView;import androidx.recyclerview.widget.RecyclerView;import com.example.asm_java_nangcao1.R;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import java.util.ArrayList;import java.util.UUID;import static android.content.Context.MODE_PRIVATE;public class horizontal_listProduc_Adapter extends RecyclerView.Adapter<horizontal_listProduc_Adapter.ViewHolder> {    ArrayList<khoHang_Model> mainModels;    sanPham_Activity contextHorizontal;    public horizontal_listProduc_Adapter(ArrayList<khoHang_Model> mainModels, sanPham_Activity contextHorizontal) {        this.mainModels = mainModels;        this.contextHorizontal = contextHorizontal;    }    @Override    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {        View view = LayoutInflater.from(parent.getContext())                .inflate(R.layout.item_recyrle_produc_ngang, parent, false);        return new ViewHolder(view);    }    @Override    public void onBindViewHolder(horizontal_listProduc_Adapter.ViewHolder holder, int position) {        //gán hình ảnh bằng link        Glide.with(contextHorizontal)                .load(mainModels.get(position).getHinhAnh())                .into(holder.img_anhSanPham);        holder.tv_tenSanPham.setText(mainModels.get(position).getTenSanPham().toString());        holder.tv_giaSanPham.setText(mainModels.get(position).getGiaSanPham().toString() + "vnđ");        holder.tv_xuatXu_sanPham.setText("Xuất xứ: " + mainModels.get(position).getXuatXu().toString());        String loaiSp;        if (mainModels.get(position).getLoaiSanPham() == 1) {            loaiSp = "Cây cảnh trong nhà";        } else if (mainModels.get(position).getLoaiSanPham() == 2) {            loaiSp = "Cây vườn";        } else {            loaiSp = "Cây cao cấp";        }        holder.tv_loaiSanPham.setText("Loại SP: " + loaiSp.toString());        //   sự kiện thêm sản phẩm vào giỏ hàng        holder.img_btn_addToCard.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                /********************lấy dữ liệu từ Sharedpre...**********************/                String idgioHangShr;                idgioHangShr = holder.shareAcout.getString("key_idGioHang", "");                //    địa chỉ đường giẫn lưu thông tin                //     đường giẫn tại "Users", tại child                holder.myRef = holder.database.getReference("Cart").child(idgioHangShr);                UUID uuid = UUID.randomUUID();                //     add vô mảng rồi lưu thông tin lên địa chỉ                holder.listGioHang = new gioHang_Model(uuid.toString(), mainModels.get(position).getIdSanPham(), 1);                holder.myRef.child(holder.listGioHang.getIdGioHang()).setValue(holder.listGioHang);                //        lấy số lượng set lên giỏ hàng                contextHorizontal.firebasGetNumberCart(contextHorizontal.findViewById(R.id.sanPham_tv_numberProduc));                contextHorizontal.openDialogAddToCart();            }        });    }    @Override    public int getItemCount() {        if (mainModels != null) {            return mainModels.size();        }        return 0;    }    public class ViewHolder extends RecyclerView.ViewHolder {        private ImageView img_anhSanPham, img_btn_addToCard;        private TextView tv_tenSanPham, tv_giaSanPham, tv_xuatXu_sanPham, tv_loaiSanPham;        private FirebaseDatabase database;        private DatabaseReference myRef;        private gioHang_Model listGioHang;        private SharedPreferences shareAcout;        public ViewHolder(View itemView) {            super(itemView);//            firebase            database = FirebaseDatabase.getInstance("https://asmandroid-duan1-default-rtdb.asia-southeast1.firebasedatabase.app/");            shareAcout = contextHorizontal.getSharedPreferences("AccountSharedPreferences", MODE_PRIVATE);            img_anhSanPham = itemView.findViewById(R.id.item_horizontal_produc_imgshow);            tv_tenSanPham = itemView.findViewById(R.id.item_horizontal_produc_tvTenSanPham);            tv_giaSanPham = itemView.findViewById(R.id.item_horizontal_produc_tvGiaSanPham);            tv_xuatXu_sanPham = itemView.findViewById(R.id.item_horizontal_produc_tvXuatXuSanPham);            tv_loaiSanPham = itemView.findViewById(R.id.item_horizontal_produc_tvLoaiSanPham);            img_btn_addToCard = itemView.findViewById(R.id.item_horizontal_produc_img_btnAddToCard);        }    }}