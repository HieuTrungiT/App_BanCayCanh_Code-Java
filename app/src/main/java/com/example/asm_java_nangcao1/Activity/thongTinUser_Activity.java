package com.example.asm_java_nangcao1.Activity;import androidx.appcompat.app.AppCompatActivity;import androidx.cardview.widget.CardView;import android.app.Dialog;import android.content.Intent;import android.content.SharedPreferences;import android.graphics.Color;import android.graphics.drawable.ColorDrawable;import android.os.Bundle;import android.view.Gravity;import android.view.View;import android.view.Window;import android.view.WindowManager;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import com.bumptech.glide.Glide;import com.example.asm_java_nangcao1.R;import com.example.asm_java_nangcao1.quanLyThanhVien_Activity;import de.hdodenhof.circleimageview.CircleImageView;public class thongTinUser_Activity extends AppCompatActivity {    private ImageView            ThongTinUser_img_btn_back,            ThongTinUser_img_btn_moFileAnh;    private TextView            ThongTinUser_tv_nameUser;    private LinearLayout            ThongTinUser_llout_btn_thongTinTaiKhoan,            ThongTinUser_llout_quanLyKhoHang,            ThongTinUser_llout_quanLyNhanVien,            ThongTinUser_llout_quanLyDonHang;    private CircleImageView            ThongTinUser_CrlImg_avatarUser;    private CardView            ThongTinUser_cartv_btn_logOut;    private SharedPreferences shareAcout;    String idUser, idgioHangShr, avatarShr, nameShr, userNameShr, passwordShr, diaChiShr, gmailShr;    int quyenShr, soDienThoaiShr;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_thong_tin_user);        anhXa();        getSharepr();        setValue();        checkQuyen();        batSuKien();    }    private void setValue() {        if (avatarShr.equals("")) {            ThongTinUser_CrlImg_avatarUser.setImageResource(R.drawable.ic_avatar_null);        } else {            //gán hình ảnh bằng link            Glide.with(thongTinUser_Activity.this)                    .load(avatarShr)                    .into(ThongTinUser_CrlImg_avatarUser);        }        ThongTinUser_tv_nameUser.setText("WECOME "+nameShr);    }    private void checkQuyen() {//        quyen 0 là admin 1 là người dùng        if (!(quyenShr == 0)) {            ThongTinUser_llout_quanLyKhoHang.setVisibility(View.INVISIBLE);            ThongTinUser_llout_quanLyNhanVien.setVisibility(View.INVISIBLE);        } else {            ThongTinUser_llout_quanLyKhoHang.setVisibility(View.VISIBLE);            ThongTinUser_llout_quanLyNhanVien.setVisibility(View.VISIBLE);        }    }    private void batSuKien() {//        thoát trang        ThongTinUser_img_btn_back.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent = new Intent(thongTinUser_Activity.this, sanPham_Activity.class);                startActivity(intent);            }        });//     mở form thông tin tài khoản        ThongTinUser_llout_btn_thongTinTaiKhoan.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent = new Intent(thongTinUser_Activity.this, suaThongTinNguoiDung_Activity.class);                startActivity(intent);            }        });//        tạo điều kiện phân quyền//        mở quản lý kho hàng        ThongTinUser_llout_quanLyKhoHang.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent = new Intent(thongTinUser_Activity.this, quanLyKho_Activity.class);                startActivity(intent);            }        });//        mở quản lý nhân viên//        mở quản lý hóa đơn        ThongTinUser_cartv_btn_logOut.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                openDialogLogout();            }        });        ThongTinUser_llout_quanLyNhanVien.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                Intent intent = new Intent(thongTinUser_Activity.this, quanLyThanhVien_Activity.class);                startActivity(intent);            }        });        ThongTinUser_llout_quanLyDonHang.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                openDialogError();            }        });    }    private void openDialogError() {        final Dialog dialog = new Dialog(this);        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);        dialog.setContentView(R.layout.dialog_cuttom_formerror);        Window window = dialog.getWindow();        if (window == null) {            return;        }        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));        WindowManager.LayoutParams windowAttributes = window.getAttributes();        windowAttributes.gravity = Gravity.CENTER;        window.setAttributes(windowAttributes);//        sử lý khi nhấn ra ngoài thì có thoát hay không        dialog.setCancelable(false);//        khai báo bắt sự kiện        TextView Dialog_them_tvBtn_khong = dialog.findViewById(R.id.dialog_them_tvBtn_khong);        TextView Dialog_them_tvBtn_dongY = dialog.findViewById(R.id.dialog_them_tvBtn_dongY);        Dialog_them_tvBtn_dongY.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                dialog.dismiss();            }        });        dialog.show();    }    private void openDialogLogout() {        final Dialog dialog = new Dialog(this);        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);        dialog.setContentView(R.layout.dialog_cuttom_dangxuat);        Window window = dialog.getWindow();        if (window == null) {            return;        }        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));        WindowManager.LayoutParams windowAttributes = window.getAttributes();        windowAttributes.gravity = Gravity.CENTER;        window.setAttributes(windowAttributes);//        sử lý khi nhấn ra ngoài thì có thoát hay không        dialog.setCancelable(false);//        khai báo bắt sự kiện        TextView Dialog_them_tvBtn_khong = dialog.findViewById(R.id.dialog_them_tvBtn_khong);        TextView Dialog_them_tvBtn_dongY = dialog.findViewById(R.id.dialog_them_tvBtn_dongY);//        tắt dialog đi        Dialog_them_tvBtn_khong.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                dialog.dismiss();            }        });        Dialog_them_tvBtn_dongY.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                dialog.dismiss();                shareAcout = getSharedPreferences("AccountSharedPreferences", MODE_PRIVATE);                SharedPreferences.Editor editor = shareAcout.edit();                editor.clear();                editor.commit();                Intent intent = new Intent(thongTinUser_Activity.this, Login_Activity.class);                startActivity(intent);            }        });        dialog.show();    }    /********************lấy dữ liệu từ Sharedpre...**********************/    private void getSharepr() {        shareAcout = getSharedPreferences("AccountSharedPreferences", MODE_PRIVATE);        idUser = shareAcout.getString("key_idUserName", "");        quyenShr = shareAcout.getInt("key_quyen", 0);        idgioHangShr = idgioHangShr = shareAcout.getString("key_idGioHang", "");        avatarShr = shareAcout.getString("key_avatar", "");        nameShr = shareAcout.getString("key_name", "");        userNameShr = shareAcout.getString("key_userName", "");        passwordShr = shareAcout.getString("key_password", "");        diaChiShr = shareAcout.getString("key_diaChi", "");        soDienThoaiShr = shareAcout.getInt("key_soDienThoai", 0);        gmailShr = shareAcout.getString("key_gmail", "");    }    private void anhXa() {//       imgView        ThongTinUser_img_btn_back = findViewById(R.id.thongTinUser_img_btn_back);        ThongTinUser_img_btn_moFileAnh = findViewById(R.id.thongTinUser_img_btn_moFileAnh);//       textView        ThongTinUser_tv_nameUser = findViewById(R.id.thongTinUser_tv_nameUser);//       LianerLayout        ThongTinUser_llout_btn_thongTinTaiKhoan = findViewById(R.id.thongTinUser_llout_btn_thongTinTaiKhoan);        ThongTinUser_llout_quanLyKhoHang = findViewById(R.id.thongTinUser_llout_quanLyKhoHang);        ThongTinUser_llout_quanLyNhanVien = findViewById(R.id.thongTinUser_llout_quanLyNhanVien);        ThongTinUser_llout_quanLyDonHang = findViewById(R.id.thongTinUser_llout_quanLyDonHang);//       CircleImageView        ThongTinUser_CrlImg_avatarUser = findViewById(R.id.thongTinUser_CrlImg_avatarUser);//        CardView        ThongTinUser_cartv_btn_logOut = findViewById(R.id.thongTinUser_cartv_btn_logOut);    }}